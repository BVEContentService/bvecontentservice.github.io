---
layout: page
title: 准备文件
navbar: "上传教程"
---

由于内容服务不仅要提供文件，还要提供相关信息、预览图等，所以您需要撰写一些内容与配置文件，并使您的线路档案符合我们所需的格式。

如您在遵循此文档操作的过程中遇到问题，欢迎您致函 [zbx1425@outlook.com](mailto:zbx1425@outlook.com) 。但请您**一定在完全阅读本文档且仍无法理解的情况下发送邮件。**对于本文档中已涉及的问题恕不解答。

### 前言

虽然有些偏题，**请勿高估计算机的智力水平。**虽然有大言不惭之嫌，近年来许多人对于计算机能做到什么这事仍然有些误解。电脑真的都是傻子，所以请您切勿在各类名称或文件等处省下几字，然后指望它能推断一些诸类的事项。您真的必须做到一字不差，否则它就真的不给干活。

虽然本文很长，但这是为了概括到BCS的所有功能，BCS的基础使用并不复杂。您不需采用本文所述的所有功能即可上传路线。

由于个人语文水平堪忧，下方对于文件夹和文件的描述可能略显抽象。因此在这里先给您一个示例。如果您在阅读下方指南的过程中有所不解，可随时参阅。

此示例中，一个Email为 1234567890@qq.com 的同志上传了 3 条线路，每条都有路线预览图片，其中第二条和第三条采取了不同形式的TXT/HTML描述文字。

```
1234567890.qq.com
│  author.ini
│
├─CSSSC-Guangzhou Metro Line 1
│      CSSSC-Guangzhou Metro Line 1_1.1.ini
│      CSSSC-Guangzhou Metro Line 1.jpg
│      CSSSC-Guangzhou Metro Line 1_1.1_h2.zip
│
├─CSSSC-Pyongyang Metro CLM Line
│      CSSSC-Pyongyang Subway CLM Line_1.1_h2.zip
|      CSSSC-Pyongyang Subway CLM Line.html
│      CSSSC-Pyongyang Subway CLM Line.jpg
│      CSSSC-Pyongyang Subway CLM Line_1.1.ini
│
└─CSSSC-Guangzhou Metro Line 6
        CSSSC-Guangzhou Metro Line 6_2.0.ini
        CSSSC-Guangzhou Metro Line 6_2.0.txt
        CSSSC-Guangzhou Metro Line 6.jpg
        CSSSC-Guangzhou Metro Line 6_2.0_h2.zip
```

### 准备工作

1. 在您的电脑上您喜爱的位置新建一个空文件夹。
2. 在这个空文件夹之中，新建一个以您目前能够使用的Email为名的文件夹。请将`@`换成`.`。如`zbx1425.outlook.com`。
   接下来提到的所有操作都将在这个以您的Email为名的文件夹中进行。

### 关于您的信息 (仅需填写一次)

1. 在开始准备关于线路的信息之前，您首先要准备一份 `author.ini` 文件，并**直接放在以Email为名的目录**下，而非其子目录内——即如示例中所示。
   
2. 您**可借助[此处的自动生成工具](https://api.zbx1425.tk:8953/bcs-src/tool/packini.html)**，也可手动编辑 ini。工具网页上，将鼠标移动到文本框上即可查看关于填写的指引事项。因此此处文档仅强调部分重要事项，或给出一些限于篇幅没有写出的高级内容和用法。在工具网页中填好所有内容后，按“提交”，就会自动生成并下载一份`author.ini`文件，您只需将其放置到上述文件夹内即可。

   部分浏览器可能提醒该文件有安全风险，个人以人格担保请您放一百个心。而且实际上ini文件是纯文字文件，不含程序代码，根本无法对您的电脑进行任何操作。如您实在较为谨慎，也可使用杀毒软件检查。
   
3. **推荐您使用外置描述文件。**您可创建`author.txt`或`author.html`文件放置在`author.ini`文件旁，索引程序将自动读取其内容作为您的描述文字。这样操作编写方便，修改便捷。在TXT文件中您可自由使用所有符号，您更可以使用HTML来为您的描述页加上各种特效、图片甚至视频。

   如您不使用上述方式，在Description一栏填入您的描述文字，可省略。若您需要多行文字，直接在中间换行即可，程序使用**英文双引号**来确定文字范围。不过正因如此，您填写的描述文字中**不能出现英文半角引号 `"` ，请用中文引号 `“”` 代替。**另外——虽然一般人不太会这么干，如果您的描述文字直接以`http://`、`https://`、`/` 等字符开头，为避免误识别，请在其前补空格。或您也可——

4. 如果您不愿每次使用自动生成工具，或想要修改ini文件，您可手动编辑。请一定使用**英文引号**放在您文字的两侧，请注意**检查引号是否配对**。由于Windows自带的记事本功能较少，较推荐您安装使用Sublime Text作为编辑器，或Notepad++。在保存文本时注意采用 `UTF-8` 字符编码，最好`无BOM`。

### 添加路线包

`author.ini` 必须**直接放在以Email为名的目录**下，而非其子目录内。但索引程序对您线路的要求就较松了。您可以自由组织目录结构，将线路文件直接放在Email为名的目录内，或其任意子目录内。

1. 您**可借助[此处的自动生成工具](https://api.zbx1425.tk:8953/bcs-src/tool/packini.html)**，也可手动编辑 ini，但人工编辑时请注意检查引号配对等。工具网页上，将鼠标移动到文本框上即可查看关于填写的指引事项。因此此处文档仅强调部分重要事项，或给出一些限于篇幅没有写出的高级内容和用法。
   
   **ID。必须全英文。可包括26个大小写字母、数字、空格、及横线 `-`，但不要包括下划线 `_` 。**
   这是显示在Hmmsim菜单中的名称。例如：
   
   ```
   MTR Modified Initial System
   ```
   
   **线路版本。**很多作者们和中心们会给线路提供多次更新，因此客户端拥有自动更新功能，当线上的版本号更新时会自动提示下载新版线路。BCS只支持由数字和点组成的版本号，请勿输入空格和字母。如`3.6.1`。如果您所上传的线路无版本或并不关心版本号，您可自由发挥，但建议您使用 `1.0` 或 `0.0` 。
   
   在上传新版本线路后，您既可删除旧版本zip、ini等，也可不删除。在默认情况下，新版本线路会自动在软件菜单中顶替掉旧版本线路的位置。如用户打开设置中的“显示所有路线包”，则仍可查看和下载未删除的旧版本线路。
   
2. **推荐您使用外置描述文件。**虽然描述文字并非必须，但写一段描述文字可以让玩家更快了解您的线路。Description也与个人信息中用法相同，同样也可使用 txt 或 html。这样您就可以更方便地使用多行文字，或使用HTML来插入图片、视频、甚至是Javascript！不过考虑到一些线路版本间描述信息无大变化，因此名称既可加也可不加版本号，如 `MTR Modified Initial System_1.0.html` 与 `MTR Modified Initial System.html` 均有效，将如以上方式命名的文件放置在ini旁边即可自动识别。如同时存在，将优先选择有着对应版本号的描述文件。**也可使用外部网站上内容作描述文字。**此时在Description框内直接填入其网址即可。

   如您不使用上方叙述的TXT/HTML文字，您可直接在Description框中打字。多行文字是支持的，但请注意，由于ini的局限，**不能出现英文半角引号 `"` ，请用中文引号 `“”` 代替。**另外——虽然一般人不太会这么干，如果您的描述文字直接以`http://`、`https://`、`/` 等字符开头，为避免误识别，请在其前补空格。

3. **路线预览图片。**索引程序接受 png 与 jpg 格式图片，同样是版本号加不加均可。如 `MTR Modified Initial System.png `，同样放置在旁边即自动识别。**或如您使用外部图床图片**，您可在底部Thumbnail一栏填入图片直链地址，如 `https://openbve-project.net/images/logo.png` 来人工指定预览图片，同时不要在目录下放置图片既可。图片也可省略，如省略会使用倒也不难看的默认图片。

   描述文件和预览图片要与 ini 文件放置在**同一目录下**，也就是放在它旁边。 

4. **进阶配置。**AutoOpen若打勾，则按下"安装"按钮后会自动弹出显示您的线路主页的窗口。
   而ForceView则要求您必须点击这一页面上一个按钮，或通过各类方式，触发一次到 `bcs://startDownload` 的链接才可开始下载。您可通过这一方式强制玩家阅读一些内容，或为您增添……比如说广告收入？注意：您需要设置这样一个链接，如果页面上没有这个链接，那么就无法下载此线路。
   如不打勾这两项，则按下安装按钮后直接开始下载。

   NoFile可以用作没有获得转载授权（因此不能上传线路档）或不想上传文件时的解决办法。打勾之后，按下下载按钮将打开前面设置的线路主页，以引导用户手动从原作者网页下载线路。此时即不需进行下一步。

5. 复制过来您所有的zip格式线路档，并将其命名为：

   ```
   [ID]_[版本号]_[模拟程序].zip
   ```

   其中，`h2 `代表Hmmsim2，`ob`代表openBVE，`b5`代表BVE5。字母小写。例如：

   ```
   MTR Modified Initial System_1.0_h2.zip
   ```

   或者，如您使用外链网盘，您可如外链预览图一般对应在ini中设定`File_H2`, `File_OB`, `File_B5`。

### 大功告成

此时您已经准备好相应的资料，可以将您的路线档上传到内容服务平台了。有些复杂，辛苦您了！

### 接下来呢?

内容服务平台没有被设计成由一个单一的服务器组成的平台，因为单一的服务器不仅储量有限，且价格昂贵，维护如此的服务器也超出了个人拥有的人力物力。因此，我们十分建议各位尽量把路线档上传到各类Pages等在线免费可外链存储、托管服务，以分散载荷。较好的免费文件托管方式如下：

| 服务名称             | 单文件大小限制 | 单储存库限制 | 总大小限制 |
| -------------------- | -------------- | ------------ | ---------- |
| 码云Pages            | 100MB          | 500MB        | 每人 5GB   |
| TeraCloud            | 无限制         | 不分库       | 每人 20GB  |
| **天津公用源服务器** | 1000MB         | 不分库       | 共用 58GB  |
| Github Pages         | 50MB           | 不分库       | 每人 1GB   |

总体来说，码云Pages综合性能最佳，但单文件大小卡得较死；TeraCloud很好，但部分运营商访问速度较慢，请尝试直连或反向代理后(详见TeraCloud上传教程)速度是否可接受；如有问题再使用公用源服务器。

请根据您线路的条件选择相应教程：

* [上传到TeraCloud或其它外链网盘](clouddisk.html)

* [上传到公用源服务器](publicsrc.html)
* 上传到Pages或其它Git服务