---
layout: page
title: 准备文件
navbar: "上传教程"
---

由于内容服务不仅要提供文件，还要提供相关信息、预览图等，所以您需要撰写一些内容与配置文件，并使您的线路档案符合我们所需的格式。

如您在遵循此文档操作的过程中遇到问题，欢迎您致函 [zbx1425@outlook.com](mailto:zbx1425@outlook.com) 。但请您**一定在完全阅读本文档且仍无法理解的情况下发送邮件。**对于本文档中已涉及的问题恕不解答。

### 准备工作

1. 在您的电脑上您喜爱的位置新建一个空文件夹。
2. 在这个空文件夹之中，新建一个以您目前能够使用的Email为名的文件夹。请将`@`换成`.`。如`zbx1425.outlook.com`。
   接下来提到的所有操作都将在这个以您的Email为名的文件夹中进行。

### 关于您的信息

1. 在这个以Email为名的文件夹中新建一个名为  `author.ini ` 的文件，文件名全小写。使用Sublime Text, Notepad++, 或记事本等软件打开。
   在配置过程中您还需要写很多配置文件。我们选择使用配置文件的原因是我们觉得就算改成往某种窗口里面打字也没方便多少……而且其实要写的内容不多。

2. 这是要写进里面的内容的范例：

   ```ini
   Name_LO = "郑爱广"
   Name_EN = "Zheng AiGuang"
   Name_SA = "鄭愛廣"
   Homepage = "https://www.stackoverflow.com"
   Description = "编这么个名字就是为了让简繁字外形差距大点"
   ```

   三个Name从上到下依次是您的"本地名称"，"英文名称"，"辅助名称"。我们建议您在"本地名称"中填写您个人或组织的中文名，"英文名称"中填英文名，"辅助名称"用作简繁互化。如您因使用缩略网名等原因无英文名或无中文名，只需**整行省略**即可，请勿只将引号内留空。辅助名称也可同样整行省略。

   如果您有个人网站，或者您想展示贴吧等各类社区主页之类的东西，请在Homepage一项填写网页链接。如没有同样可整行省略。

   Description一栏是对您的描述文字，同样可省略。若您需要多行文字，直接在中间换行即可，程序使用**英文双引号**来确定文字范围。不过正因如此，您无法在描述文字中使用英文双引号。所以您也可使用——
   **外置描述文件。**如有，索引程序将自动使用`author.html`和`author.txt`文件内容作为对您的描述。在TXT文件中您可自由使用所有符号，您更可以使用HTML来为您的文字加上各种特效。(注: 客户端使用Android之`Html.fromHtml`功能, 支持的标签较少, CSS/JS甭想了, font能用, img倒是可联网加载, 具体请您自行尝试)

   请一定使用**英文引号**放在您文字的两侧。在保存文本时注意采用 `UTF-8` 字符编码，最好`无BOM`。

### 添加路线包

`author.ini` 必须**直接放在以Email为名的目录**下，而非其子目录内。但索引程序对您线路的要求就较松了。您可以自由组织目录结构，将线路放在Email为名的目录内，或其任意子目录内。

1. 您可以手动编辑ini，也可借助[此处的自动生成工具](https://api.zbx1425.tk:8953/bcs-src/tool/packini.html)。工具网页上，将鼠标移动到文本框上即可查看关于填写的指引事项。此处文档则强调部分重要事项，或给出一些限于篇幅没有写出的高级内容和用法。
   
   **ID。必须全英文。可包括26个大小写字母、数字、空格、及横线 `-`，但不要包括下划线 `_` 。**
   这是显示在Hmmsim菜单中的名称。例如：
   
   ```
   MTR Modified Initial System
   ```
   
   **线路版本。**很多作者们和中心们会给线路提供多次更新，因此客户端拥有自动更新功能，当线上的版本号更新时会自动提示下载新版线路。BCS只支持由数字和点组成的版本号，请勿输入空格和字母。如`3.6.1`。如果您所上传的线路无版本或并不关心版本号，您可自由发挥，但建议您使用 `1.0` 或 `0.0` 。
   
   在上传新版本线路后，您既可删除旧版本zip、ini等，也可不删除。在默认情况下，新版本线路会自动在软件菜单中顶替掉旧版本线路的位置。如用户打开设置中的“显示所有路线包”，则仍可查看和下载未删除的旧版本线路。
   
2. 在此对上述网页中限于篇幅没有描述到的地方作一些解释。

   **使用TXT/HTML作描述文字。**Description也与个人信息中用法相同。同样也可使用 txt 或 html。这样您就可以更方便地使用多行文字，或使用HTML来插入图片、视频、甚至是Javascript！不过考虑到一些线路版本间描述信息无大变化，因此名称既可加也可不加版本号，如 `MTR Modified Initial System_1.0.html` 与 `MTR Modified Initial System.html` 均有效，将如以上方式命名的文件放置在ini旁边即可自动识别。如同时存在，将优先选择有着对应版本号的描述文件。建议您为路线写一段描述性文字，如果没有描述也可省略。**也可使用外部网站上内容作描述文字。**此时在Description框内直接填入其网址即可。

   **路线预览图片。**索引程序接受 png 与 jpg 格式图片，同样是版本号加不加均可。如 `MTR Modified Initial System.png `，同样放置在旁边即自动识别。**或如您使用外部图床图片**，您可在底部Thumbnail一栏填入图片直链地址，如 `https://openbve-project.net/images/logo.png` 来人工指定预览图片，同时不要在目录下放置图片既可。图片也可省略，如省略会使用倒也不难看的默认图片。

   描述文件和预览图片要与 ini 文件放置在**同一目录下**，也就是放在它旁边。 

   AutoOpen若打勾，则按下"安装"按钮后会自动弹出显示您的线路主页的窗口。
   而ForceView则要求您必须点击这一页面上一个按钮，或通过各类方式，触发一次到 `bcs://startDownload` 的链接才可开始下载。您可通过这一方式强制玩家阅读一些内容，或为您增添……比如说广告收入？注意：您需要设置这样一个链接，如果页面上没有这个链接，那么就无法下载此线路。
   如不打勾这两项，则按下安装按钮后直接开始下载。

   NoFile可以用作没有获得转载授权（因此不能上传线路档）或不想上传文件时的解决办法。打勾之后，按下下载按钮将打开前面设置的线路主页，以引导用户手动从原作者网页下载线路。此时即不需进行下一步。

3. 复制过来您所有的zip格式线路档，并将其命名为：

   ```
   [ID]_[版本号]_[模拟程序].zip
   ```

   其中，`h2 `代表Hmmsim2，`ob`代表openBVE，`b5`代表BVE5。字母小写。例如：

   ```
   MTR Modified Initial System_1.0_h2.zip
   ```

   或者，如您使用外链网盘，您可如外链预览图一般对应在ini中设定`File_H2`, `File_OB`, `File_B5`。

### 大功告成

此时您已经准备好相应的资料，可以将您的路线档上传到内容服务平台了。有些复杂，辛苦您了！

虽然一定有所出入，您的文件夹可能大致要长这样：（此处第一条路线使用了HTML描述文字，因此有一html文件；第二条路线为NoFile且未上传预览图）

```
zbx1425.outlook.com
│  author.ini
│
├─MTR Modified Initial System
│      MTR Modified Initial System.png
│      MTR Modified Initial System.html
│      MTR Modified Initial System_1.0_h2.zip
│      MTR Modified Initial System_1.0.ini
│
└─NoFileTest
        NoFileTest_1.2.ini
```



### 接下来呢?

内容服务平台没有被设计成由一个单一的服务器组成的平台，因为单一的服务器不仅储量有限，且价格昂贵，维护如此的服务器也超出了个人拥有的人力物力。因此，我们十分建议各位尽量把路线档上传到各类Pages等在线免费可外链存储、托管服务，以分散载荷。较好的免费文件托管方式如下：

| 服务名称             | 单文件大小限制 | 单储存库限制 | 总大小限制 |
| -------------------- | -------------- | ------------ | ---------- |
| 码云Pages            | 100MB          | 500MB        | 每人 5GB   |
| TeraCloud            | 无限制         | 不分库       | 每人 20GB  |
| **天津公用源服务器** | 1000MB         | 不分库       | 共用 58GB  |
| Github Pages         | 50MB           | 不分库       | 每人 1GB   |

总体来说，码云Pages综合性能最佳，但单文件大小卡得较死；TeraCloud很好，但部分运营商访问速度较慢，请尝试直连或反向代理后(详见TeraCloud上传教程)速度是否可接受；如有问题再使用公用源服务器。

请根据您线路的条件选择相应教程：

* [上传到TeraCloud或其它外链网盘](clouddisk.html)

* [上传到公用源服务器](publicsrc.html)
* 上传到Pages或其它Git服务